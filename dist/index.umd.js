!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?module.exports=t(require("animejs/lib/anime.es.js")):"function"==typeof define&&define.amd?define(["animejs/lib/anime.es.js"],t):(e||self).ImgPreview=t(e.anime)}(this,function(e){function t(e){return e&&"object"==typeof e&&"default"in e?e:{default:e}}var i=/*#__PURE__*/t(e);return class{constructor(e){this.options=Object.assign(this.defaultOptions,e)}get defaultOptions(){return{distanceFromCursor:{top:10,left:10}}}get containerID(){return"img_preview-container"}get containerLoadingClass(){return"img_preview-container__loading"}init(){var e=document.createElement("div");e.setAttribute("id",this.containerID),e.append(document.createElement("img")),e.style.display="none",e.style.position="absolute",document.querySelector("body").append(e),this.container=document.querySelector("#"+this.containerID),this.img=this.container.querySelector("img")}run(e){var t=this.filterElements(e),i=this;function n(e){i.container.classList.remove(i.containerLoadingClass),i.img.style.display="",i.onLoad(i.img),e.currentTarget.removeEventListener("load",this)}Array.prototype.forEach.call(t,e=>{e.addEventListener("mousemove",e=>{this.container.style.top=e.pageY+this.options.distanceFromCursor.top+"px",this.container.style.left=e.pageX+this.options.distanceFromCursor.left+"px"}),e.addEventListener("mouseover",e=>{this.container.classList.add(this.containerLoadingClass),this.container.style.display="",this.img.addEventListener("load",{handleEvent:n}),this.img.setAttribute("src",this.extractUrl(e.currentTarget)),this.onShow(this.container,e.currentTarget)}),e.addEventListener("mouseout",e=>{this.container.style.display="none",this.img.setAttribute("src",""),this.img.style.display="none",this.onHide(e.currentTarget)})})}filterElements(e){var t=new RegExp(".(gif|jpe?g|png|bmp|gif?d+|jpe?g?d+|png?d+|bmp?d+)$","i");return[].map.call(e,e=>e).filter((e,i)=>{var n=this.extractUrl(e);return!(!n||!n.match(t))})}extractUrl(e){var t=void 0;return"A"==e.tagName?t=e.getAttribute("data-image"):"IMG"==e.tagName&&(t=e.getAttribute("src")),t}onShow(e,t){i.default.remove(t),i.default({targets:t,opacity:.4,duration:400,easing:"linear"}),i.default.remove(e.querySelector("img")),e.querySelector("img").style.opacity=0}onLoad(e){i.default.remove(e),i.default({targets:e,opacity:1,duration:300,easing:"linear"})}onHide(e){i.default.remove(e),i.default({targets:e,opacity:1,duration:300,easing:"linear"})}}});
//# sourceMappingURL=index.umd.js.map
